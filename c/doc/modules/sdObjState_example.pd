#N canvas 0 30 798 854 10;
#X text 40 280 lets define a listener which wants to always track the
instruments state;
#X obj 153 333 t a a;
#X obj 123 435 route pitch volume;
#X floatatom 123 458 5 0 0 0 - - -;
#X floatatom 175 458 5 0 0 0 - - -;
#X text 45 591 if the listener is connected \, it stays informed:;
#N canvas 0 30 894 854 save 0;
#X obj 105 231 sgObjSetAll;
#X obj 582 253 sgObjSetAll;
#X msg 680 167 clear;
#X obj 642 135 t a b;
#X msg 475 175 read;
#X obj 613 98 sgObjGetAll GLOBAL;
#X msg 574 129 write;
#X msg 442 233 file \$1;
#X obj 580 216 sgIOText /tmp/bla;
#X obj 116 91 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 117 168 list;
#X obj 96 146 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 601 70 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 471 129 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X symbolatom 442 208 10 0 0 0 - - -;
#X text 102 65 save to ram;
#X text 8 149 load from ram;
#X text 507 65 save to disk:;
#X text 367 130 load from disk:;
#X text 328 206 change filename:;
#X obj 164 159 print;
#X obj 183 204 print loading;
#X obj 141 132 sgObjGetAll \$0-GLOBAL;
#X connect 2 0 8 0;
#X connect 3 0 8 1;
#X connect 3 1 2 0;
#X connect 4 0 8 0;
#X connect 5 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 9 0 22 0;
#X connect 10 0 0 0;
#X connect 11 0 10 0;
#X connect 12 0 5 0;
#X connect 13 0 4 0;
#X connect 14 0 7 0;
#X connect 22 0 10 1;
#X restore 587 94 pd save all objects;
#X obj 30 363 sgEventToMessage;
#X obj 123 411 route set;
#X obj 199 353 print listener;
#X text 30 22 This module is just a convention how to build high level
objects in a patch.;
#N canvas 0 30 798 854 properties 0;
#X text 507 144 args: name "\$0" init? loadbang?;
#X obj 135 175 print propOut;
#X floatatom 229 75 5 0 0 0 - - -;
#X obj 280 180 print redirect;
#X text 321 205 redirect to other properties;
#X symbolatom 233 264 10 0 0 0 - - -;
#X obj 142 382 print propOut;
#X obj 313 382 print redirect;
#X obj 135 152 sdProperty testProp \$0 42;
#X msg 82 95 list get 1 testProp;
#X msg 229 99 list set 2 testProp \$1;
#X msg 406 99 list get 0;
#X msg 412 126 list get 1 otherProp;
#X msg 93 296 list get 1 testProp;
#X msg 233 294 list set 2 testProp \$1;
#X msg 228 321 list get 0;
#X msg 456 307 list get 1 otherProp;
#X obj 142 357 sdPropertySym testProp \$0 bla;
#X obj 133 511 sdPropertyList listProp \$0;
#X connect 2 0 10 0;
#X connect 5 0 14 0;
#X connect 8 0 1 0;
#X connect 8 1 3 0;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X connect 11 0 8 0;
#X connect 12 0 8 0;
#X connect 13 0 17 0;
#X connect 14 0 17 0;
#X connect 15 0 17 0;
#X connect 16 0 17 0;
#X connect 17 0 6 0;
#X connect 17 1 7 0;
#X restore 55 67 pd properties;
#X text 151 68 (how to define "properties");
#X text 544 120 "generic" gui to read/write objects:;
#N canvas 0 30 798 854 other 0;
#X obj 269 270 send, f 18;
#X obj 434 170 loadbang;
#X obj 242 164 sdPackFromHuman;
#X msg 284 71 list out ( clear );
#X msg 282 44 list out ( add %0-listener );
#X obj 242 187 sdReplace \$0;
#X msg 291 96 list out ( set %0-listener x );
#X msg 293 119 list out ( del %0-listener );
#X obj 376 239 sdReplace \$0;
#X msg 434 193 symbol %0-obscureInstrument;
#X msg 446 216 symbol %0-weirdInstrument;
#X connect 1 0 9 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 0 1;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X restore 396 526 pd other connection msgs;
#X text 40 491 we can now register "listener" to stay informed about
the instrument:;
#N canvas 0 30 894 854 other 0;
#X floatatom 190 25 5 0 0 0 - - -;
#X floatatom 213 74 5 0 0 0 - - -;
#X obj 267 361 send, f 18;
#X obj 432 261 loadbang;
#X obj 240 255 sdPackFromHuman;
#X obj 240 278 sdReplace \$0;
#X obj 374 330 sdReplace \$0;
#X msg 432 284 symbol %0-obscureInstrument;
#X msg 444 307 symbol %0-weirdInstrument;
#X msg 364 167 list start ( );
#X msg 372 199 list start ( pitch ( 3 ) volume ( 0.5 ) );
#X msg 213 97 list set ( volume \$1 );
#X msg 190 47 list set ( pitch \$1 );
#X msg 229 123 list set ( name instrument );
#X connect 0 0 12 0;
#X connect 1 0 11 0;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 2 1;
#X connect 7 0 6 0;
#X connect 8 0 6 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 4 0;
#X connect 12 0 4 0;
#X connect 13 0 4 0;
#X restore 404 629 pd other control msgs;
#X floatatom 75 612 5 0 0 0 - - -;
#X text 399 648 (setting properties);
#X text 296 785 (get all properties + extra infos);
#X text 51 696 we can ask the instrument to inform us (the "listener")
about its state:;
#X obj 123 387 sdPackToMessage;
#X obj 153 310 r \$0-listener;
#X text 227 729 (get current pitch);
#X obj 105 755 s \$0-obscureInstrument;
#X msg 105 731 list get 1 pitch;
#X obj 104 830 s \$0-obscureInstrument;
#X msg 104 783 list get 3 out 1 %0-descr;
#X obj 104 806 sdReplace \$0;
#X obj 61 201 sdExampleObj \$0-weirdInstrument \$0-GLOBAL;
#X msg 554 305 load;
#X msg 515 305 save;
#X msg 75 634 list set 3 pitch 1 \$1 \;;
#X obj 75 657 s \$0-obscureInstrument;
#X obj 583 345 sdObjSaveAll \$0-GLOBAL;
#X obj 61 135 sdExampleObj \$0-obscureInstrument \$0-GLOBAL;
#X text 32 105 define an "instrument" as an stateful object with some
properties:;
#X text 327 135 <- open abstraction to see details;
#X msg 75 530 list out 2 add \$1-listener \;;
#X obj 75 553 s \$0-obscureInstrument;
#X connect 1 0 7 0;
#X connect 1 1 9 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 7 1 21 0;
#X connect 8 0 2 0;
#X connect 17 0 32 0;
#X connect 21 0 8 0;
#X connect 22 0 1 0;
#X connect 25 0 24 0;
#X connect 27 0 28 0;
#X connect 28 0 26 0;
#X connect 30 0 34 0;
#X connect 31 0 34 0;
#X connect 32 0 33 0;
#X connect 38 0 39 0;
