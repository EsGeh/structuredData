#N canvas 0 30 798 854 10;
#X text 40 280 lets define a listener which wants to always track the
instruments state;
#X obj 107 399 route pitch volume;
#X floatatom 107 422 5 0 0 0 - - -;
#X floatatom 159 422 5 0 0 0 - - -;
#X text 45 591 if the listener is connected \, it stays informed:;
#X obj 107 375 route set;
#X text 30 22 This module is just a convention how to build high level
objects in a patch.;
#N canvas 0 473 798 411 properties 0;
#X obj 135 175 print propOut;
#X floatatom 229 75 5 0 0 0 - - -;
#X obj 280 180 print redirect;
#X text 321 205 redirect to other properties;
#X symbolatom 233 264 10 0 0 0 - - -;
#X obj 142 382 print propOut;
#X obj 313 382 print redirect;
#X text 507 144 args: name ["\$0" init];
#X obj 558 212 r \$0-testProp;
#X obj 558 235 print testProp.intern;
#X obj 135 152 sdProperty testProp \$0 42 info;
#X msg 82 95 get testProp;
#X msg 229 99 set testProp \$1;
#X msg 407 99 get;
#X msg 412 126 get otherProp;
#X msg 410 303 get;
#X msg 412 330 get otherProp;
#X obj 138 570 print propOut;
#X obj 309 570 print redirect;
#X msg 406 491 get;
#X msg 408 518 get otherProp;
#X obj 142 357 sdPropertySym symProp \$0 bla;
#X msg 105 272 get symProp;
#X msg 233 294 set symProp \$1;
#X msg 101 460 get listProp;
#X msg 244 456 set listProp a b c;
#X msg 253 482 set listProp;
#X obj 138 545 sdPropertyList listProp \$0;
#X connect 1 0 12 0;
#X connect 4 0 23 0;
#X connect 8 0 9 0;
#X connect 10 0 0 0;
#X connect 10 1 2 0;
#X connect 11 0 10 0;
#X connect 12 0 10 0;
#X connect 13 0 10 0;
#X connect 14 0 10 0;
#X connect 15 0 21 0;
#X connect 16 0 21 0;
#X connect 19 0 27 0;
#X connect 20 0 27 0;
#X connect 21 0 5 0;
#X connect 21 1 6 0;
#X connect 22 0 21 0;
#X connect 23 0 21 0;
#X connect 24 0 27 0;
#X connect 25 0 27 0;
#X connect 26 0 27 0;
#X connect 27 0 17 0;
#X connect 27 1 18 0;
#X restore 55 67 pd properties;
#X text 151 68 (how to define "properties");
#X text 533 250 "generic" gui to read/write objects:;
#N canvas 0 30 798 854 other 0;
#X obj 269 270 send, f 18;
#X obj 434 170 loadbang;
#X obj 242 164 sdPackFromHuman;
#X msg 284 71 list out ( clear );
#X msg 282 44 list out ( add %0-listener );
#X obj 242 187 sdReplace \$0;
#X msg 291 96 list out ( set %0-listener x );
#X msg 293 119 list out ( del %0-listener );
#X obj 376 239 sdReplace \$0;
#X msg 434 193 symbol %0-obscureInstrument;
#X msg 446 216 symbol %0-weirdInstrument;
#X connect 1 0 9 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 0 1;
#X connect 9 0 8 0;
#X connect 10 0 8 0;
#X restore 571 524 pd other connection msgs;
#X text 40 491 we can now register "listener" to stay informed about
the instrument:;
#N canvas 0 30 798 854 other 0;
#X floatatom 190 25 5 0 0 0 - - -;
#X floatatom 213 74 5 0 0 0 - - -;
#X obj 267 361 send, f 18;
#X obj 432 261 loadbang;
#X obj 240 255 sdPackFromHuman;
#X obj 240 278 sdReplace \$0;
#X obj 374 330 sdReplace \$0;
#X msg 432 284 symbol %0-obscureInstrument;
#X msg 444 307 symbol %0-weirdInstrument;
#X msg 364 167 list start ( );
#X msg 372 199 list start ( pitch ( 3 ) volume ( 0.5 ) );
#X msg 213 97 list set ( volume \$1 );
#X msg 190 47 list set ( pitch \$1 );
#X msg 229 123 list set ( name instrument );
#X connect 0 0 12 0;
#X connect 1 0 11 0;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 2 1;
#X connect 7 0 6 0;
#X connect 8 0 6 0;
#X connect 9 0 4 0;
#X connect 10 0 4 0;
#X connect 11 0 4 0;
#X connect 12 0 4 0;
#X connect 13 0 4 0;
#X restore 579 627 pd other control msgs;
#X floatatom 75 612 5 0 0 0 - - -;
#X text 574 646 (setting properties);
#X text 244 807 (get all properties + extra infos);
#X text 51 696 we can ask the instrument to inform us (the "listener")
about its state:;
#X text 78 730 (get current pitch);
#X obj 103 774 s \$0-obscureInstrument;
#X msg 103 750 list get 1 pitch;
#X obj 104 830 s \$0-obscureInstrument;
#X obj 61 201 sdExampleObj \$0-weirdInstrument \$0-GLOBAL;
#X msg 602 179 load;
#X msg 563 179 save;
#X obj 75 657 s \$0-obscureInstrument;
#X obj 598 204 sdObjSaveAll \$0-GLOBAL;
#X obj 61 135 sdExampleObj \$0-obscureInstrument \$0-GLOBAL;
#X text 32 105 define an "instrument" as an stateful object with some
properties:;
#X text 327 135 <- open abstraction to see details;
#X obj 75 573 s \$0-obscureInstrument;
#X msg 75 528 list out 2 add %0-listener \;;
#X obj 75 551 sdReplace \$0;
#N canvas 0 30 798 854 UserInterface 0;
#X obj 97 46 sdObjState_ui \$0-GLOBAL;
#X restore 554 271 pd UserInterface;
#X obj 608 754 r test;
#X msg 104 803 list get 3 out 1 test;
#X obj 608 777 print test;
#X text 255 730 (send current pitch to specific receiver);
#X msg 258 750 list get 4 pitch out 1 test;
#X msg 119 608 list start 0;
#X obj 79 347 sdObjState \$0-listener GLOB;
#X floatatom 225 612 5 0 0 0 - - -;
#X obj 226 657 s \$0-obscureInstrument;
#X msg 226 634 raw set pitch \$1 \;;
#X obj 75 634 sdEvent set pitch;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 5 0 1 0;
#X connect 13 0 43 0;
#X connect 19 0 18 0;
#X connect 22 0 25 0;
#X connect 23 0 25 0;
#X connect 30 0 31 0;
#X connect 31 0 29 0;
#X connect 33 0 35 0;
#X connect 34 0 20 0;
#X connect 37 0 18 0;
#X connect 38 0 24 0;
#X connect 39 0 5 0;
#X connect 40 0 42 0;
#X connect 42 0 41 0;
#X connect 43 0 24 0;
